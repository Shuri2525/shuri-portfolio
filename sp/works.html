<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WORKS | HIDAKA SHURI | Web・グラフィックデザイナー | 大分</title>
  <meta name="description" content="デザイナー・日高朱璃の制作事例一覧。Web・LP・DTP・ロゴなどのグラフィックデザイン作品をご覧いただけます。">

  <!-- OGP -->
  <meta property="og:title" content="WORKS | HIDAKA SHURI | Web・グラフィックデザイナー">
  <meta property="og:description" content="デザイナー・日高朱璃の制作事例。Web・DTP・グラフィックの作品をご覧ください。">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://shuri2525.github.io/shuri-portfolio/sp/works.html">
  <meta property="og:image" content="https://shuri2525.github.io/shuri-portfolio/assets/ogp.jpg">
  <meta property="og:site_name" content="HIDAKA SHURI PORTFOLIO">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="WORKS | HIDAKA SHURI | Web・グラフィックデザイナー">
  <meta name="twitter:description" content="デザイナー・日高朱璃の制作事例。Web・DTP・グラフィックの作品をご覧ください。">
  <meta name="twitter:image" content="https://shuri2525.github.io/shuri-portfolio/assets/ogp.jpg">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="../assets/common/logo_3f3b3a.svg">
  <link rel="apple-touch-icon" href="../assets/common/logo_3f3b3a.svg">

  <!-- デバイス判定・自動リダイレクト -->
  <script src="../js/device-redirect.js"></script>

  <!-- PC版への関連づけ（SEO対策） -->
  <link rel="canonical" href="../works.html">

  <!-- CSS -->
  <link rel="stylesheet" href="./sp-style.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet">
</head>

<body class="sp-works">

<!-- ヘッダー -->
<header class="sp-header">
  <div class="sp-header-inner">
    <a href="./index.html" class="sp-logo-text">HIDAKA SHURI</a>
    <button class="hamburger" id="hamburger" aria-label="メニュー">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

<!-- メニューオーバーレイ -->
<nav class="menu-overlay" id="menuOverlay">
  <ul class="menu-list">
    <li><a href="./index.html">TOP</a></li>
    <li><a href="./works.html">WORKS</a></li>
    <li><a href="./about.html">ABOUT</a></li>
    <li><a href="./contact.html">CONTACT</a></li>
  </ul>

  <!-- Instagram -->
  <a
    href="https://www.instagram.com/hidaka.shuri?igsh=MzhubHdlcjQ0Y3Ez&utm_source=qr"
    class="menu-instagram"
    aria-label="Instagramを見る（外部リンク）"
    target="_blank"
    rel="noopener noreferrer"
  >
    Instagram
  </a>

  <!-- 右下装飾（模様） -->
  <img
    src="../assets/deco/deco_f5f5f5.svg"
    alt=""
    class="menu-pattern"
    aria-hidden="true"
  >
</nav>

<!-- メインコンテンツ -->
<main class="sp-main">



  <!-- ページタイトル -->
  <section class="sp-page-header sp-works-page-header">
    <h1 class="sp-page-title" id="categoryTitle">WEB</h1>
    <p class="sp-page-subtitle" id="categorySubtitle">HP / LP / TOPページ</p>
  </section>

  <!-- 作品一覧 -->
  <section class="sp-works-list-section">
    <div class="sp-works-list" id="worksList"></div>
  </section>

  <!-- カテゴリ切り替え -->
  <section class="sp-category-nav">
    <a class="sp-cat-btn sp-cat-top" href="./index.html"># TOP</a>
    <button class="sp-cat-btn active" data-cat="web"># WEB</button>
    <button class="sp-cat-btn" data-cat="dtp"># DTP</button>
    <button class="sp-cat-btn" data-cat="graphic"># GRAPHIC</button>
  </section>

</main>

<!-- フッター -->
<footer class="sp-footer">
  <p class="sp-copyright">© 2026 Hidaka Shuri</p>
</footer>

<!-- モーダル -->
<div class="sp-modal-overlay" id="worksModal">
  <div class="sp-modal-wrapper">

    <!-- モーダルヘッダー -->
    <header class="sp-modal-header">
      <div class="sp-modal-header-left">
        <button class="sp-modal-nav-btn sp-modal-prev" id="modalPrev" aria-label="前の作品">‹</button>
        <button class="sp-modal-nav-btn sp-modal-next" id="modalNext" aria-label="次の作品">›</button>
      </div>
      <p class="sp-modal-category" id="modalCategory">WEB</p>
      <div class="sp-modal-header-right">
        <button class="sp-modal-close" id="modalClose">×</button>
      </div>
    </header>

    <!-- モーダルコンテンツ -->
    <div class="sp-modal-content">
      
      <!-- タイトル -->
      <div class="sp-modal-title-block">
        <h2 class="sp-modal-title" id="modalTitle">作品タイトル</h2>
        <p class="sp-modal-tag" id="modalTag">タグ</p>
      </div>

      <!-- メイン画像 -->
      <div class="sp-modal-image">
        <img id="modalThumb" src="" alt="">
      </div>

      <!-- 概要 -->
      <section class="sp-modal-section">
        <h3 class="sp-modal-section-title">OUTLINE</h3>
        <p class="sp-modal-section-sub">背景と設計意図</p>
        <p class="sp-modal-text" id="modalOutline"></p>

        <ul class="sp-modal-meta">
          <li>
            <span class="sp-meta-label">ターゲット</span>
            <span class="sp-meta-text" id="modalTarget"></span>
          </li>
          <li>
            <span class="sp-meta-label">制作期間</span>
            <span class="sp-meta-text" id="modalPeriod"></span>
          </li>
          <li>
            <span class="sp-meta-label">意図</span>
            <span class="sp-meta-text" id="modalPurpose"></span>
          </li>
          <li>
            <span class="sp-meta-label">設計軸</span>
            <span class="sp-meta-text" id="modalAxis"></span>
          </li>
        </ul>
      </section>

      <!-- 詳細 -->
      <section class="sp-modal-section">
        <h3 class="sp-modal-section-title">DETAIL</h3>
        <p class="sp-modal-section-sub">設計の要点</p>
        <p class="sp-modal-text" id="modalDetail"></p>

        <div class="sp-modal-detail-image" id="modalDetailImageWrap" style="display: none;">
          <img id="modalDetailImg" src="" alt="">
        </div>
      </section>

      <!-- 最終作品用の終了エリア -->
      <div class="sp-modal-end-area hidden" id="modalEndArea">
        <button class="sp-modal-end-close" id="modalEndClose" aria-label="閉じる">
          ×
        </button>
      </div>

    </div>

    <!-- モーダル下部ナビゲーション -->
    <nav class="sp-modal-footer-nav">
      <button class="sp-modal-footer-nav-btn prev" id="sp-modal-footer-prev" aria-label="前の作品">
        <span class="arrow">←</span>
        <span>PREV</span>
      </button>
      <button class="sp-modal-footer-nav-btn close hidden" id="sp-modal-footer-close" aria-label="閉じる">
        <span>×</span>
      </button>
      <button class="sp-modal-footer-nav-btn next" id="sp-modal-footer-next" aria-label="次の作品">
        <span>NEXT</span>
        <span class="arrow">→</span>
      </button>
    </nav>

  </div>
</div>

<!-- JavaScript -->
<script>
// WORKSデータ（完全版・修正済み）
const WORKS_DATA = {
  web: [
    {
      "id": "01",
      "title": "余白設計で魅せるポートフォリオ",
      "modalTitle": "余白設計で魅せる<br>ポートフォリオ",
      "tag": "ポートフォリオ / 個人制作",
      "thumb": "../assets/works/web/01/hero.jpg",
      "modalThumb": "../assets/works/web/01/thumb.jpg",
      "detailImg": "../assets/works/web/01/detail.jpg",
      "detailImg2": "../assets/works/web/01/detail2.jpg",
      "outline": "自身のデザインや考え方を伝えるために制作したポートフォリオサイトです。情報を詰め込みすぎず、必要なことが自然に伝わる構成を意識しました。",
      "target": "ブランドや印象を大切にしたい事業者・個人",
      "period": "約3ヶ月",
      "purpose": "制作姿勢と設計力が自然に伝わる見せ方を整えるため",
      "designAxis": "余白設計 / 情報階層 / 世界観の統一",
      "detailText": "視線の流れと余白のバランスを整え、落ち着いたトーンで全体を設計しました。作品そのものが引き立つよう装飾は抑え、心地よく読み進められる構成にまとめています。"
    },

    {
      "id": "06",
      "title": "地域に伝わる消防団ポータル設計",
      "modalTitle": "地域に伝わる<br>消防団ポータル設計",
      "tag": "TOPページ / コンペ制作",
      "thumb": "../assets/works/web/06/hero.jpg",
      "modalThumb": "../assets/works/web/06/thumb.jpg",
      "detailImg": "../assets/works/web/06/detail.jpg",
      "outline": "消防団の活動を紹介するポータルサイトをコンペにて制作しました。親しみやすさと信頼感のバランスを意識しました。",
      "target": "県内在住の幅広い年齢層の男女",
      "period": "5日",
      "purpose": "公共情報をやさしく整理し、理解と関心につなげるため",
      "designAxis": "公共性 / 親しみ / 情報整理",
      "detailText": "写真とレイアウトで安心感をつくり、地域の方が自然に関心を持てる構成に整えました。情報量が過多にならないよう整理し、迷わず閲覧できるナビゲーションを設計しています。短期間でも品質を保てるよう、デザインパターンとコンポーネントを効率的に活用しました。"
    },

    {
      "id": "02",
      "title": "予約導線を整えたホテルサイト",
      "modalTitle": "予約導線を整えた<br>ホテルサイト",
      "tag": "TOPページ / コンペ制作",
      "thumb": "../assets/works/web/02/hero.jpg?v=20260226",
      "modalThumb": "../assets/works/web/02/thumb.jpg?v=20260226",
      "detailImg": "../assets/works/web/02/detail.jpg",
      "outline": "沖縄・那覇のビジネスホテルTOPページデザインをコンペにて制作しました。",
      "target": "40代男性を中心とした、ビジネス・ファミリー・団体利用者",
      "period": "3日",
      "purpose": "予約まで迷わない導線と安心感の両立を目指すため",
      "designAxis": "予約導線 / 安心感 / 情報の即時把握",
      "detailText": "落ち着きと信頼感が伝わる配色と余白設計で、安心して選べる印象に整えました。ビジネス利用と旅行利用の両方を想起できるよう、写真と情報の配置にリズムを持たせています。"
    },

        {
      "id": "05",
      "title": "信頼と先進性を両立した医院サイト",
      "modalTitle": "信頼と先進性を両立した<br>医院サイト",
      "tag": "TOPページ / コンペ制作",
      "thumb": "../assets/works/web/05/hero.jpg",
      "modalThumb": "../assets/works/web/05/thumb.jpg",
      "detailImg": "../assets/works/web/05/detail.png",
      "outline": "整形外科医院のTOPページリニューアル案をコンペにて制作しました。安心感の中に、少しの先進性を感じられるデザインを目指しました。",
      "target": "通院を検討する幅広い年齢層のユーザー",
      "period": "3日",
      "purpose": "信頼感を保ちながら、現代的な印象へ整えるため",
      "designAxis": "信頼感 / 清潔感 / 先進性のバランス",
      "detailText": "清潔感のある配色と余白設計で、見やすさと信頼感を両立する構成に整えました。幅広い年代の方が直感的に情報を探せるよう、要素の優先度を整理したシンプルな導線を採用しています。"
    },

    {
      "id": "03",
      "title": "癒しの空気感を伝えるヘッドスパLP",
      "modalTitle": "癒しの空気感を伝える<br>ヘッドスパLP",
      "tag": "TOPページ / コンペ制作",
      "thumb": "../assets/works/web/03/hero.jpg",
      "modalThumb": "../assets/works/web/03/thumb.jpg",
      "detailImg": "../assets/works/web/03/detail.jpg",
      "outline": "海外在住女性向けのヘッドスパ専門店LPをコンペにて制作しました。日本らしい癒しの空気感が伝わるビジュアルを意識しました。",
      "target": "30代後半〜40代後半の女性（海外在住）",
      "period": "3日",
      "purpose": "世界観の表現と予約行動のバランスを整えるため",
      "designAxis": "情緒表現 / 可読性 / 行動導線",
      "detailText": "情報を詰め込みすぎず、余白と配色でリラックス感が伝わる構成に整えました。世界観を保ちながら予約まで自然につながるよう、要素の密度と順序を丁寧に調整しています。"
    },
    /*
    {
      id: "04",
      title: "老舗焼肉店サイト",
      tag: "TOPページ / コンペ制作",
      thumb: "../assets/works/web/04/hero.jpg",
      modalThumb: "../assets/works/web/04/thumb.jpg",
      detailImg: "../assets/works/web/04/detail.png",
      outline: "飲食店のコーポレートサイトリニューアルを想定し、TOPページを制作しました。",
      target: "来店を検討する幅広い年齢層のユーザー",
      period: "5日",
      purpose: "高級感と親しみやすさを両立したブランディングのため",
      detailText: "神戸牛専門店のリニューアル案件を想定し、高級感がありながらも来店しやすい印象を与えるトーン設計を意識しました。昼夜それぞれの利用シーンを想定し、情報の優先度と視線の流れを整理しています。"
    },
    */

  ],
  dtp: [
    {
      "id": "01",
      "title": "第一印象を整える名刺デザイン",
      "modalTitle": "第一印象を整える<br>名刺デザイン",
      "tag": "名刺 / 個人制作",
      "thumb": "../assets/works/dtp/01/hero.jpg?v=20260226",
      "modalThumb": "../assets/works/dtp/01/thumb.jpg?v=20260226",
      "outline": "自身のブランディングを意識して制作した名刺です。シンプルな中にも印象に残るデザインを目指しました。",
      "target": "取引先・クライアント",
      "period": "1日",
      "purpose": "初対面でも落ち着いて伝わる情報設計にするため",
      "designAxis": "第一印象 / 可読性 / 再現性",
      "detailText": "タイポグラフィと余白の取り方を丁寧に調整し、必要な情報が一目で伝わる構成に整えました。入稿時の再現性や可読性にも配慮し、実用面と印象面の両方を成立させています。"
    },
    {
      "id": "02",
      "title": "説明しやすい三つ折りリーフレット",
      "modalTitle": "説明しやすい<br>三つ折りリーフレット",
      "tag": "チラシ / 実案件",
      "thumb": "../assets/works/dtp/02/hero.jpg?v=20260226",
      "modalThumb": "../assets/works/dtp/02/thumb.webp?v=20260226",
      "detailImg": "../assets/works/dtp/02/detail.webp",
      "outline": "外壁塗装サービスの三つ折りリーフレット。案内時に伝わりやすい順序と情報の展開を意識して制作しました。",
      "target": "戸建住宅を検討する施主・住民",
      "period": "2日",
      "purpose": "説明しやすさと読みやすさを両立するため",
      "designAxis": "説明順序 / 情報圧縮 / 信頼感",
      "detailText": "観音開きの特性を活かし、説明の流れが自然につながる情報設計に整えました。専門的な内容でも読みやすさを保てるよう、配色と要素配置を整理し、安心感とデザイン性の両立を意識しています。"
    },
    {
      "id": "03",
      "title": "更新運用に強い戸建て販売チラシ",
      "modalTitle": "更新運用に強い<br>戸建て販売チラシ",
      "tag": "チラシ / 実案件",
      "thumb": "../assets/works/dtp/03/hero.jpg",
      "modalThumb": "../assets/works/dtp/03/thumb.jpg",
      "detailImg": "../assets/works/dtp/03/detail.webp",
      "outline": "新築分譲住宅の販売チラシ。視認性と汎用性を重視した設計です。",
      "target": "住宅購入を検討するファミリー層・地域住民",
      "period": "3日",
      "purpose": "更新しやすさと見やすさを継続できる設計にするため",
      "designAxis": "更新性 / 視認性 / 展開しやすさ",
      "detailText": "物件情報が主役として伝わるよう情報を整理し、視線が迷わない紙面構成に整えました。更新頻度の高い運用を想定し、配色を切り替えて展開できる設計で、統一感と更新性を両立しています。"
    }
  ],
  graphic: [

      {
  "id": "01",
  "title": "多義性を持つSモチーフロゴ",
  "modalTitle": "多義性を持つ<br>Sモチーフロゴ",
  "tag": "ロゴ / 個人制作",
  "thumb": "../assets/works/graphic/01/hero.jpg",
  "modalThumb": "../assets/works/graphic/01/thumb.jpg",
  /*"detailImg": "./assets/works/graphic/01/detail.jpg",*/
  "outline": "自身の名前の頭文字「S」をモチーフにした、シンプルで多面的な印象を持つパーソナルロゴです。モノクロ配色により、あらゆる媒体での汎用性を確保しています。",
  "target": "個人ブランディング全般",
  "period": "3日",
  "purpose": "個人のらしさを一貫して伝える土台を作るため",
  "designAxis": "象徴性 / 多義性 / 汎用性",
  "detailText": "控えめでありながら記憶に残るバランスを目指し、シンプルな造形に多義性を持たせました。媒体を問わず使える汎用性を確保しながら、見る人の解釈が広がる余白を意識して設計しています。"
},

    {
      "id": "02",
      "title": "上質感を伝える美容室ロゴ提案",
      "modalTitle": "上質感を伝える<br>美容室ロゴ提案",
      "tag": "ロゴ / コンペ",
      "thumb": "../assets/works/graphic/02/hero.webp",
      "modalThumb": "../assets/works/graphic/02/thumb.webp?v=20260226",
      /*"detailImg": "../assets/works/graphic/01/detail.jpg",*/
      "outline": "美容室のブランディングを目的としたロゴデザインを、コンペ提出用に制作しました。40代の女性をターゲットに、落ち着きと品のある印象を意識しています。",
      "target": "美容室（40代女性中心）",
      "period": "３日",
      "purpose": "ブランドの印象をやわらかく記憶に残すため",
      "designAxis": "上質感 / 視認性 / 記憶性",
      "detailText": "「まっすぐに続く美しさ」を軸に、縦ラインと余白を活かした静けさのある構成に整えました。上品な視認性を保ちながら、丸みのある処理でやわらかな印象を加え、記憶に残る佇まいを目指しています。"
    },
    {
      "id": "03",
      "title": "つながりを象徴する食品ブランドロゴ",
      "modalTitle": "つながりを象徴する<br>食品ブランドロゴ",
      "tag": "ロゴ / コンペ",
      "thumb": "../assets/works/graphic/03/hero.webp",
      "modalThumb": "../assets/works/graphic/03/thumb.webp?v=20260226",
      /*"detailImg": "../assets/works/graphic/02/detail.webp",*/
      "outline": "食品会社のブランドロゴとしてコンペに提出したデザインです。人と人とのつながりを“結ぶ”というテーマに落とし込みました。",
      "target": "食品メーカー・生活者",
      "period": "５日",
      "purpose": "価値観を静かに伝え、長く記憶に残る印象を作るため",
      "designAxis": "物語性 / 温度感 / ブランド一体感",
      "detailText": "「むすぶ」という行為を抽象化し、あたたかいつながりが伝わる造形に整えました。水引を想起させる要素と深みのある配色で、品格とぬくもりを両立し、ブランド名との一体感まで設計しています。"
    }
  ]
};

let currentCategory = null;
let currentIndex = -1;

// カテゴリごとのタイトル
const CATEGORY_INFO = {
  web: { title: "WEB", subtitle: "HP / LP / TOPページ" },
  dtp: { title: "DTP", subtitle: "名刺 / チラシ / パンフレット" },
  graphic: { title: "GRAPHIC", subtitle: "ロゴ / ビジュアル" }
};

// 作品一覧を描画
function renderWorks(category) {
  console.log('renderWorks called with category:', category);
  
  const worksList = document.getElementById('worksList');
  const categoryTitle = document.getElementById('categoryTitle');
  const categorySubtitle = document.getElementById('categorySubtitle');
  
  console.log('worksList element:', worksList);
  
  if (!worksList) {
    console.error('worksList element not found!');
    return;
  }
  
  // タイトル更新
  const info = CATEGORY_INFO[category];
  if (categoryTitle) categoryTitle.textContent = info.title;
  if (categorySubtitle) categorySubtitle.textContent = info.subtitle;
  
  // 作品リストをクリア
  worksList.innerHTML = '';
  
  // 作品を描画
  const works = WORKS_DATA[category] || [];
  console.log('Number of works:', works.length);
  
  works.forEach((work, index) => {
    console.log(`Rendering work ${index + 1}:`, work.title);
    
    const [tagEn, tagJa] = work.tag.split('/').map(t => t?.trim());
    
    const workItem = document.createElement('div');
    workItem.className = 'sp-work-item';
    workItem.dataset.category = category;
    workItem.dataset.id = work.id;
    workItem.innerHTML = `
      <img src="${work.thumb}" alt="${work.title}" class="sp-work-thumb" loading="lazy">
      <p class="sp-work-title">${work.title}</p>
      <p class="sp-work-label">
        <span class="sp-tag-en"># ${tagEn}</span>
        ${tagJa ? `<span class="sp-tag-ja"> / ${tagJa}</span>` : ''}
      </p>
    `;
    
    // クリックイベント
    workItem.addEventListener('click', () => {
      openModal(work, category);
    });
    
    worksList.appendChild(workItem);
  });
  
  console.log('renderWorks completed. Items in DOM:', worksList.children.length);
}

// モーダルを開く
function openModal(work, category) {
  const modal = document.getElementById('worksModal');
  const works = WORKS_DATA[category] || [];
  const index = works.findIndex(item => item.id === work.id);

  currentCategory = category;
  currentIndex = index >= 0 ? index : 0;

  // 作品を表示
  showWork(currentCategory, currentIndex);

  // モーダル表示
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
  
  // 先頭にスクロール
  modal.scrollTop = 0;
  requestAnimationFrame(() => {
    modal.scrollTop = 0;
  });
}

function getDesignAxis(work, category) {
  if (work.designAxis) return work.designAxis;
  const axisMap = {
    web: "導線設計 / 情報の余白 / 信頼感のトーン",
    dtp: "可読性 / 運用しやすさ / 情報の優先度",
    graphic: "象徴性 / 余白バランス / 記憶に残る造形"
  };
  return axisMap[category] || "情報整理 / 余白設計 / 印象の一貫性";
}

function formatModalTitle(work) {
  const source = (work.modalTitle || work.title || '').trim();
  if (!source) return '';
  if (source.includes('<br>')) return source;
  const plain = source.replace(/\s+/g, '');
  if (plain.length <= 12) return plain;

  const mid = Math.floor(plain.length / 2);
  const candidates = ['を', 'で', 'と', 'の'];
  let breakIndex = -1;

  candidates.forEach(ch => {
    const idx = plain.indexOf(ch);
    if (idx > 2 && idx < plain.length - 3) {
      if (breakIndex === -1 || Math.abs(idx - mid) < Math.abs(breakIndex - mid)) {
        breakIndex = idx + 1;
      }
    }
  });

  if (breakIndex === -1) breakIndex = mid;
  return `${plain.slice(0, breakIndex)}<br>${plain.slice(breakIndex)}`;
}

function showWork(category, index) {
  const works = WORKS_DATA[category] || [];
  const work = works[index];
  if (!work) return;

  // データを設定
  const modal = document.getElementById('worksModal');
  modal.classList.remove('modal-cat-web', 'modal-cat-dtp', 'modal-cat-graphic');
  modal.classList.add(`modal-cat-${category || 'web'}`);

  document.getElementById('modalCategory').textContent = category.toUpperCase();
  document.getElementById('modalTitle').innerHTML = formatModalTitle(work);
  document.getElementById('modalTag').textContent = work.tag;
  document.getElementById('modalThumb').src = work.modalThumb;
  document.getElementById('modalThumb').alt = work.title;
  document.getElementById('modalOutline').textContent = work.outline;
  document.getElementById('modalTarget').textContent = work.target;
  document.getElementById('modalPeriod').textContent = work.period;
  document.getElementById('modalPurpose').textContent = work.purpose;
  document.getElementById('modalAxis').textContent = getDesignAxis(work, category);
  document.getElementById('modalDetail').textContent = work.detailText;

  // 終点導線（最終作品のみ表示）
  const endActions = document.getElementById('modalEndActions');
  if (endActions) {
    const isLast = index >= works.length - 1;
    endActions.style.display = isLast ? 'flex' : 'none';
    endActions.setAttribute('aria-hidden', isLast ? 'false' : 'true');
  }
  const footerNav = document.querySelector('.sp-modal-footer-nav');
  if (footerNav) {
    const isLast = index >= works.length - 1;
    footerNav.style.display = isLast ? 'none' : 'flex';
  }
  
  // 詳細画像
  const detailImgWrap = document.getElementById('modalDetailImageWrap');
  const detailImg = document.getElementById('modalDetailImg');
  if (work.detailImg) {
    detailImg.src = work.detailImg;
    detailImg.alt = work.title;
    detailImgWrap.style.display = 'block';
  } else {
    detailImgWrap.style.display = 'none';
  }

  // ナビ状態
  if (typeof window.updateModalNav === 'function') {
    window.updateModalNav(works.length);
  }

  // 先頭にスクロール
  const modalEl = document.getElementById('worksModal');
  if (modalEl) {
    modalEl.scrollTop = 0;
    requestAnimationFrame(() => {
      modalEl.scrollTop = 0;
    });
  }
}

// モーダルを閉じる
function closeModal() {
  const modal = document.getElementById('worksModal');
  modal.classList.remove('active');
  document.body.style.overflow = '';
}

// 初期化
document.addEventListener('DOMContentLoaded', () => {
  const catButtons = document.querySelectorAll('.sp-category-nav .sp-cat-btn[data-cat]');
  const modalClose = document.getElementById('modalClose');
  const modal = document.getElementById('worksModal');
  const modalPrev = document.getElementById('modalPrev');
  const modalNext = document.getElementById('modalNext');
  const footerPrevBtn = document.getElementById('sp-modal-footer-prev');
  const footerNextBtn = document.getElementById('sp-modal-footer-next');
  const modalWrapper = modal.querySelector('.sp-modal-wrapper');

  // モーダルナビの状態管理
  function updateModalNav(total) {
    const footerCloseBtn = document.getElementById('sp-modal-footer-close');
    const endArea = document.getElementById('modalEndArea');
    
    const works = WORKS_DATA[currentCategory] || [];
    const isLastWork = currentIndex >= works.length - 1;
    
    // 最終作品の場合、PREV/NEXTを完全に非表示にして×のみ表示
    if (isLastWork) {
      if (footerPrevBtn) footerPrevBtn.style.display = 'none';
      if (footerNextBtn) footerNextBtn.style.display = 'none';
      if (footerCloseBtn) footerCloseBtn.classList.remove('hidden');
    } else {
      // 最終作品でない場合、通常のナビゲーション
      if (footerPrevBtn) {
        footerPrevBtn.style.display = 'flex';
        if (currentIndex <= 0) {
          footerPrevBtn.classList.add('hidden');
        } else {
          footerPrevBtn.classList.remove('hidden');
        }
      }
      
      if (footerNextBtn) {
        footerNextBtn.style.display = 'flex';
        footerNextBtn.classList.remove('hidden');
      }
      
      if (footerCloseBtn) footerCloseBtn.classList.add('hidden');
    }
    
    // 最終作品の場合、コンテンツ内の終了エリアを表示
    if (endArea) {
      if (isLastWork) {
        endArea.classList.remove('hidden');
      } else {
        endArea.classList.add('hidden');
      }
    }
  }

  // グローバル参照用
  window.updateModalNav = updateModalNav;

  // 前後移動
  function goPrev() {
    const works = WORKS_DATA[currentCategory] || [];
    if (currentIndex > 0) {
      currentIndex -= 1;
      showWork(currentCategory, currentIndex);
    }
  }

  function goNext() {
    const works = WORKS_DATA[currentCategory] || [];
    if (currentIndex < works.length - 1) {
      currentIndex += 1;
      showWork(currentCategory, currentIndex);
    }
  }

  // ヘッダーナビ（残しておくが使わない）
  if (modalPrev) modalPrev.addEventListener('click', goPrev);
  if (modalNext) modalNext.addEventListener('click', goNext);

  // 下部ナビ
  if (footerPrevBtn) footerPrevBtn.addEventListener('click', goPrev);
  if (footerNextBtn) footerNextBtn.addEventListener('click', goNext);

  // スワイプで前後移動
  let touchStartX = 0;
  let touchStartY = 0;
  modalWrapper.addEventListener('touchstart', (e) => {
    const touch = e.touches[0];
    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
  }, { passive: true });

  modalWrapper.addEventListener('touchend', (e) => {
    const touch = e.changedTouches[0];
    const dx = touch.clientX - touchStartX;
    const dy = touch.clientY - touchStartY;

    if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy)) {
      if (dx > 0) {
        goPrev();
      } else {
        goNext();
      }
    }
  }, { passive: true });
  
  // クエリ指定カテゴリを初期表示
  const params = new URLSearchParams(window.location.search);
  const initialCat = params.get('cat');
  const initialId = params.get('id');
  const validCats = new Set(['web', 'dtp', 'graphic']);
  const startCat = validCats.has(initialCat) ? initialCat : 'web';

  catButtons.forEach(btn => {
    btn.classList.toggle('active', btn.dataset.cat === startCat);
  });
  renderWorks(startCat);
  
  // TOPから遷移した場合、指定IDのモーダルを自動で開く
  if (initialId) {
    const works = WORKS_DATA[startCat] || [];
    const work = works.find(w => w.id === initialId);
    
    if (work) {
      // 少し遅延させてから開く（ページ読み込み完了後）
      setTimeout(() => {
        openModal(work, startCat);
      }, 300);
    }
  }
  
  // カテゴリボタンクリック
  catButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const category = btn.dataset.cat;
      
      // アクティブ状態を切り替え
      catButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      // 作品を再描画
      renderWorks(category);
      
      // ページタイトルの位置にスクロール
      const pageHeader = document.querySelector('.sp-works-page-header');
      if (pageHeader) {
        const headerHeight = 60;
        const targetPosition = pageHeader.offsetTop - headerHeight;
        window.scrollTo({ 
          top: targetPosition, 
          behavior: 'smooth' 
        });
      }
    });
  });

  // モーダルを閉じる
  modalClose.addEventListener('click', closeModal);
  
  // フッタークローズボタン
  const footerCloseBtn = document.getElementById('sp-modal-footer-close');
  if (footerCloseBtn) footerCloseBtn.addEventListener('click', closeModal);
  
  // 終了エリアのクローズボタン
  const modalEndClose = document.getElementById('modalEndClose');
  if (modalEndClose) modalEndClose.addEventListener('click', closeModal);
  
  // オーバーレイクリック
  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  // ヘッダーロゴの表示制御（WORKSページはヒーローセクションなし）
  const headerLogo = document.querySelector('.sp-logo-text');
  
  // ヘッダーロゴは常に表示
  if (headerLogo) {
    headerLogo.style.opacity = '1';
    headerLogo.style.visibility = 'visible';
  }

  // ハンバーガーメニュー
  const hamburger = document.getElementById('hamburger');
  const menuOverlay = document.getElementById('menuOverlay');

  hamburger.addEventListener('click', () => {
    hamburger.classList.toggle('active');
    menuOverlay.classList.toggle('active');
    document.body.style.overflow = hamburger.classList.contains('active') ? 'hidden' : '';
  });

  // メニューリンククリックで閉じる
  document.querySelectorAll('.menu-list a').forEach(link => {
    link.addEventListener('click', () => {
      hamburger.classList.remove('active');
      menuOverlay.classList.remove('active');
      document.body.style.overflow = '';
    });
  });
});
</script>

<!-- SP ヘッダースクロール効果 -->
<script src="../js/sp-header-scroll.js"></script>

</body>
</html>
